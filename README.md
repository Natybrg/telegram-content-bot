# 🎵 בוט יצירת תוכן מוזיקלי - Telegram Music Content Bot

בוט טלגרם אוטומטי ליצירת תוכן מוזיקלי איכותי.

## 🎯 מה הבוט עושה?

הבוט מקבל ממך:
- 🖼️ תמונה (עטיפת אלבום)
- 🎵 קובץ MP3
- 📝 פרטים על השיר (8 שורות)

ומחזיר לך:
- ✅ תמונה עם קרדיטים מעוצבים
- ✅ MP3 עם תגיות מלאות ותמונת אלבום משובצת
- ✅ סרטון מיוטיוב באיכות גבוהה (אופציונלי)

## 🚀 תכונות עיקריות

### 🔐 אבטחה
- רק משתמש מורשה אחד יכול להשתמש בבוט
- משתמשים לא מורשים לא מקבלים שום תשובה

### 🎨 עיבוד תמונות
- הוספת טקסט קרדיטים בתחתית התמונה
- רקע שקוף לקריאות מושלמת
- תמיכה מלאה בעברית

### 🎵 עיבוד MP3
- עדכון תגיות ID3: Title, Artist, Year, Composer
- הטמעת תמונת אלבום בקובץ
- שמות קבצים נקיים ומסודרים

### 📺 הורדה מיוטיוב
- הורדה בשתי איכויות (High 1080p + Medium 720p)
- המרה אוטומטית ל-H.264 + AAC
- תמיכה ב-cookies לסרטונים מוגבלים

### 🗑️ ניקוי אוטומטי
- כל הקבצים נמחקים אוטומטית לאחר 60 שניות
- אין צורך בניקוי ידני

### 📱 שני לקוחות
1. **Telegram Bot API** - ממשק עם המשתמש
2. **Telegram Userbot** - העלאת קבצים גדולים (>50MB)

## 📋 דרישות מערכת

### תוכנות:
- ✅ Python 3.10 ומעלה
- ✅ FFmpeg מותקן במערכת
- ✅ Windows 10/11 (או Linux/Mac)
- ✅ חיבור אינטרנט יציב

### חשבונות:
- 📱 חשבון טלגרם
- 🔑 API credentials מטלגרם (ראה מדריך התקנה)
- 🤖 בוט טלגרם מ-@BotFather

## ⚡ התקנה מהירה

```bash
# 1. התקן תלויות
pip install -r requirements.txt

# 2. צור קובץ .env מהתבנית
copy ENV_TEMPLATE.txt .env

# 3. ערוך את .env עם הפרטים שלך
# (ראה מדריך התקנה מפורט ב-INSTALLATION.md)

# 4. הרץ את הבוט
python main.py
```

### 📚 מדריכים מפורטים

- 📖 **[INSTALLATION.md](INSTALLATION.md)** - מדריך התקנה מלא צעד אחר צעד
- 📖 **[USAGE_GUIDE.md](USAGE_GUIDE.md)** - מדריך שימוש למשתמש הקצה
- 📖 **[CHANGELOG.md](CHANGELOG.md)** - יומן שינויים וגרסאות

## 🎮 שימוש מהיר

### הרצת הבוט:
```bash
python main.py
```

### שימוש בטלגרם:

1. **פתח את הבוט** בטלגרם ושלח `/start`
2. **שלח תמונה** - עטיפת אלבום/שיר
3. **שלח MP3** - קובץ האודיו המקורי
4. **שלח 8 שורות פרטים:**
   ```
   שם השיר
   שם הזמר
   2024
   שם המלחין
   שם המעבד
   שם המיקס
   https://youtube.com/watch?v=xxxxx
   כן
   ```
5. **קבל את התוצרים** - תמונה, MP3 וידאו

### פקודות נוספות:
- `/help` - עזרה והנחיות
- `/status` - סטטוס הבוט
- `/cancel` - ביטול תהליך נוכחי

לפרטים מלאים ראה **[USAGE_GUIDE.md](USAGE_GUIDE.md)**

## 📂 מבנה הפרויקט

```
bot/
├── .env                          # משתני סביבה (לא נכלל ב-git)
├── main.py                       # נקודת כניסה ראשית
├── config.py                     # טעינת הגדרות
├── requirements.txt              # תלויות Python
│
├── plugins/                      # Pyrogram handlers
│   ├── start.py                  # פקודות בסיסיות
│   ├── content_creator.py        # לוגיקה ראשית
│   ├── queue_commands.py         # ניהול תור
│   └── settings.py               # הגדרות ותבניות
│
├── services/                      # שירותים
│   ├── media/                    # עיבוד מדיה
│   │   ├── youtube.py            # הורדה מ-YouTube
│   │   ├── ffmpeg_utils.py      # עיבוד FFmpeg
│   │   ├── audio.py             # עיבוד MP3
│   │   ├── image.py             # עיבוד תמונות
│   │   └── utils.py             # כלי עזר
│   ├── channels/                 # ניהול ערוצים
│   │   ├── manager.py           # מנהל ערוצים
│   │   ├── sender.py            # שליחה לערוצים
│   │   └── storage.py            # אחסון ערוצים
│   ├── whatsapp/                 # שירות WhatsApp
│   │   └── delivery.py          # שליחה ל-WhatsApp
│   ├── context.py                # הקשר אפליקציה
│   ├── processing_queue.py       # תור עיבוד
│   ├── rate_limiter.py          # הגבלת קצב
│   ├── templates.py             # תבניות
│   └── user_states.py           # ניהול מצבים
│
├── downloads/                    # קבצים זמניים (נמחקים אוטומטית)
├── data/                         # קבצי session ונתונים זמניים
├── logs/                         # קבצי לוגים
│
├── docs/                         # תיעוד הפרויקט
│   ├── ANALYSIS_REPORT.md
│   ├── BUGS_FOUND.md
│   ├── CODE_REVIEW.md
│   ├── DEEP_ANALYSIS_REPORT.md
│   ├── CHANNELS_GUIDE.md
│   └── WHATSAPP_DEBUG_FILES.md
│
├── tests/                        # קבצי טסט
│   ├── test_dual_download.py
│   └── test_whatsapp_upload.py
│
├── scripts/                      # סקריפטים שימושיים
│   ├── start_whatsapp_service.bat
│   └── update_whatsapp_service.bat
│
├── whatsapp_service/             # שירות Node.js ל-WhatsApp
│   ├── server.js
│   └── package.json
│
├── README.md                      # קובץ זה
├── ENV_TEMPLATE.txt              # תבנית משתני סביבה
├── channels.json                 # הגדרות ערוצים
└── templates.json                # תבניות תוכן
```

## ✅ תכונות מיושמות

- ✅ הורדת סרטונים מ-YouTube (שתי איכויות)
- ✅ עיבוד תמונות (הוספת קרדיטים)
- ✅ עיבוד MP3 (תגיות מלאות + תמונה)
- ✅ העלאת קבצים גדולים דרך Userbot
- ✅ ממשק בוט ידידותי ואינטואיטיבי
- ✅ אימות משתמשים
- ✅ ניקוי אוטומטי של קבצים
- ✅ לוגים מפורטים

## 🛡️ אבטחה

### הגנות מובנות:
- ✅ רק משתמש אחד מורשה (ADMIN_ID)
- ✅ אין תשובה למשתמשים לא מורשים
- ✅ קובץ `.env` מוגן ב-.gitignore
- ✅ ניקוי אוטומטי של קבצים זמניים
- ✅ כל הפעולות מתועדות בלוגים

⚠️ **חשוב:** אל תשתף את קובץ ה-.env או קבצי ה-session!

## 🔧 טכנולוגיות

- **Python 3.10+** - שפת התכנות
- **Pyrogram** - ספריית טלגרם
- **yt-dlp** - הורדה מיוטיוב
- **FFmpeg** - עיבוד וידאו/אודיו
- **Pillow (PIL)** - עיבוד תמונות
- **Mutagen** - עריכת תגיות MP3

## 📊 סטטיסטיקות

- **קבצים:** 15+
- **שורות קוד:** ~2,500
- **פונקציות:** 30+
- **תכונות:** 10+

## 🐛 פתרון בעיות

ראה **[INSTALLATION.md](INSTALLATION.md)** לפתרון בעיות נפוצות.

קבצי לוגים:
- `bot.log` - לוגים מפורטים של כל הפעולות

## 📞 תמיכה

- בדוק את `USAGE_GUIDE.md` למדריך שימוש
- בדוק את `INSTALLATION.md` לבעיות התקנה
- קרא את `bot.log` לזיהוי שגיאות

---

**גרסה:** 2.0  
**תאריך עדכון:** ינואר 2026  
Made with ❤️ by Senior Python Developer

