# âœ… ×¤×ª×¨×•×Ÿ ×‘×¢×™×™×ª PeerIdInvalid - × ××¦×!

**×ª××¨×™×š:** 2026-01-12 21:43  
**×¡×˜×˜×•×¡:** âœ… × ×¤×ª×¨

---

## ğŸ¯ ×”×‘×¢×™×”

×”×™×•×–×¨×‘×•×˜ ×”×™×” ××§×‘×œ ×©×’×™××ª `PeerIdInvalid` ×‘×¢×ª × ×™×¡×™×•×Ÿ ×œ×©×œ×•×— **×•×™×“××•** ×œ×¢×¨×•×¦×™ ×˜×œ×’×¨×.
- âœ… ×ª××•× ×” + MP3 ×¢×‘×“×•
- âŒ ×•×™×“××• × ×›×©×œ

---

## âœ… ×”×¤×ª×¨×•×Ÿ ×©× ××¦×

**×”×‘×¢×™×”:** ×”×™×•×–×¨×‘×•×˜ ×”×™×” ×× ×”×œ ×‘×¢×¨×•×¥, ××‘×œ **×œ× ×”×™×ª×” ×œ×• ×”×¨×©××ª "×”×•×¡×¤×ª ×× ×”×œ×™× ×—×“×©×™×"** (Add Admins).

### ×¦×¢×“×™× ×œ×¤×ª×¨×•×Ÿ:

1. **×¤×ª×— ××ª ×”×¢×¨×•×¥ ×‘×˜×œ×’×¨×** (×›×× ×”×œ ×”×¨××©×™)
2. **×¢×‘×•×¨ ×œ-Administrators** (×× ×”×œ×™×)
3. **××¦× ××ª ×”×™×•×–×¨×‘×•×˜** (×”××¡×¤×¨ ×©×‘-`PHONE_NUMBER`)
4. **×¢×¨×•×š ×”×¨×©××•×ª** (Edit Admin)
5. **×•×•×“× ×©××¡×•××Ÿ:** âœ… **Add Admins** (×”×•×¡×¤×ª ×× ×”×œ×™× ×—×“×©×™×)
6. **×©××•×¨**
7. **×”×¤×¢×œ ××—×“×© ××ª ×”×‘×•×˜**

---

## ğŸ¤” ×œ××” ×–×” ×§×•×¨×”?

### ×”×¡×‘×¨ ×˜×›× ×™:

Pyrogram ××©×ª××© ×‘-Telegram MTProto API. ×›×©×”×™×•×–×¨×‘×•×˜ ×× ×¡×” ×œ×’×©×ª ×œ×¢×¨×•×¥ ×“×¨×š API:

1. **Telegram ×‘×•×“×§:** ×”×× ×œ×™×•×–×¨×‘×•×˜ ×™×© ×”×¨×©××•×ª ××¡×¤×§×•×ª?
2. **×”×¨×©××” ×§×¨×™×˜×™×ª:** "Add Admins" × ×“×¨×©×ª ×›×“×™ ×œ×§×‘×œ ×’×™×©×” ××œ××” ×œ×¤×¨×˜×™ ×”×¢×¨×•×¥
3. **×× ×—×¡×¨×” ×”×”×¨×©××”:** Telegram ××—×–×™×¨ `PeerIdInvalid` (×›××™×œ×• ×”×¢×¨×•×¥ ×œ× ×§×™×™×)

×–×” **×œ× ×‘××’** - ×–×” feature ××‘×˜×—×” ×©×œ Telegram!

---

## ğŸ“Š ×”×”×¨×©××•×ª ×”× ×“×¨×©×•×ª ×œ×™×•×–×¨×‘×•×˜

×›×“×™ ×©×”×™×•×–×¨×‘×•×˜ ×™×¢×‘×•×“ × ×›×•×Ÿ, ×”×•× ×¦×¨×™×š ×œ×”×™×•×ª ×× ×”×œ ×¢× ×”×”×¨×©××•×ª ×”×‘××•×ª:

### ×”×¨×©××•×ª ××™× ×™××œ×™×•×ª:
- âœ… **Post Messages** (×¤×¨×¡×•× ×”×•×“×¢×•×ª)
- âœ… **Edit Messages** (×¢×¨×™×›×ª ×”×•×“×¢×•×ª)
- âœ… **Delete Messages** (××—×™×§×ª ×”×•×“×¢×•×ª)
- âœ… **Add Admins** (×”×•×¡×¤×ª ×× ×”×œ×™×) â­ **×§×¨×™×˜×™!**

### ×”×¨×©××•×ª ××•××œ×¦×•×ª (×œ×‘×˜×—):
- âœ… **Manage Chat** (× ×™×”×•×œ ×¦'××˜)
- âœ… **Send Media** (×©×œ×™×—×ª ××“×™×”)
- âœ… **Send Stickers** (×©×œ×™×—×ª ××“×‘×§×•×ª) - ××•×¤×¦×™×•× ×œ×™
- âœ… **Embed Links** (×”×˜××¢×ª ×§×™×©×•×¨×™×) - ××•×¤×¦×™×•× ×œ×™

---

## ğŸ” ××™×š ×œ×‘×“×•×§ ×©×”×”×¨×©××•×ª × ×›×•× ×•×ª

### ××•×¤×¦×™×” 1: ×“×¨×š ×”×‘×•×˜ (×¢×ª×™×“×™)

××¤×©×¨ ×œ×”×•×¡×™×£ ×¤×§×•×“×” `/check_channels` ×©×‘×•×“×§×ª ××ª ×”×”×¨×©××•×ª:

```python
# plugins/admin_commands.py (×¢×ª×™×“×™)
@app.on_message(filters.command("check_channels") & filters.user(ADMIN_ID))
async def check_channels(client: Client, message: Message):
    userbot = get_context().get_userbot()
    channels = channels_manager.get_all_channels()
    
    for channel_id in channels:
        try:
            chat = await userbot.get_chat(channel_id)
            member = await userbot.get_chat_member(channel_id, "me")
            
            if member.privileges:
                perms = member.privileges
                status = "âœ…" if perms.can_invite_users else "âŒ"
                await message.reply(
                    f"**{chat.title}**\n"
                    f"Add Admins: {status}"
                )
        except Exception as e:
            await message.reply(f"âŒ {channel_id}: {e}")
```

### ××•×¤×¦×™×” 2: ×™×“× ×™×ª (××”×™×¨)

1. ×¤×ª×— ×˜×œ×’×¨×
2. ×¢×‘×•×¨ ×œ×¢×¨×•×¥
3. ×œ×—×¥ ×¢×œ ×©× ×”×¢×¨×•×¥ ×œ××¢×œ×”
4. ×œ×—×¥ ×¢×œ "Administrators"
5. ××¦× ××ª ×”×™×•×–×¨×‘×•×˜
6. ×‘×“×•×§ ×©×™×© âœ… ×œ×™×“ "Add Admins"

---

## ğŸ“ ×œ×§×—×™× × ×œ××“×™×

### 1. ×”×¨×©××•×ª Telegram ×”×Ÿ ×§×¨×™×˜×™×•×ª
×’× ×× ×”××©×ª××©/×‘×•×˜ ×”×•× ×× ×”×œ, ×”×¨×©××•×ª ×¡×¤×¦×™×¤×™×•×ª × ×“×¨×©×•×ª ×œ×¤×¢×•×œ×•×ª API.

### 2. PeerIdInvalid ×œ× ×ª××™×“ ××•××¨ "×œ× ×—×‘×¨"
×–×” ×™×›×•×œ ×œ×”×™×•×ª:
- âŒ ×œ× ×—×‘×¨ ×‘×¢×¨×•×¥
- âŒ ×—×¡×¨×•×ª ×”×¨×©××•×ª
- âŒ ×”×¢×¨×•×¥ ×œ× ×‘-storage
- âŒ ×”×¢×¨×•×¥ × ××—×§/×¡×’×•×¨

### 3. "Add Admins" ×”×•× ×”×¨×©××” ××™×•×—×“×ª
×–×• ×”×¨×©××” ×¨×’×™×©×” ×©× ×•×ª× ×ª ×’×™×©×” ××œ××” ×œ-API ×©×œ Telegram.

---

## ğŸ“ ×”××œ×¦×•×ª ×œ×¢×ª×™×“

### 1. ×‘×“×™×§×” ×‘×–××Ÿ ×”×”×¤×¢×œ×” (Startup Check)

×”×•×¡×£ ×‘-`main.py`:

```python
async def validate_channel_permissions():
    """×‘×•×“×§ ×©×œ×™×•×–×¨×‘×•×˜ ×™×© ×”×¨×©××•×ª ×‘×›×œ ×”×¢×¨×•×¦×™×"""
    userbot = get_context().get_userbot()
    channels = channels_manager.get_all_channels()
    
    for channel_id in channels:
        try:
            member = await userbot.get_chat_member(channel_id, "me")
            if not member.privileges or not member.privileges.can_invite_users:
                logger.warning(
                    f"âš ï¸ ×”×™×•×–×¨×‘×•×˜ ×—×¡×¨ ×”×¨×©××ª 'Add Admins' ×‘×¢×¨×•×¥ {channel_id}"
                )
        except Exception as e:
            logger.error(f"âŒ ×œ× × ×™×ª×Ÿ ×œ×’×©×ª ×œ×¢×¨×•×¥ {channel_id}: {e}")
```

### 2. ×”×•×“×¢×ª ×©×’×™××” ×‘×¨×•×¨×” ×™×•×ª×¨

×¢×“×›×Ÿ ××ª `sender.py` ×œ×”×•×“×™×¢ ×¢×œ ×‘×¢×™×™×ª ×”×¨×©××•×ª:

```python
except PeerIdInvalid as e:
    logger.error(f"âŒ PeerIdInvalid: {channel_id}")
    logger.error(f"ğŸ’¡ ×¤×ª×¨×•× ×•×ª ××¤×©×¨×™×™×:")
    logger.error(f"   1. ×•×•×“× ×©×”×™×•×–×¨×‘×•×˜ ×—×‘×¨ ×‘×¢×¨×•×¥")
    logger.error(f"   2. ×©×œ×— ×”×•×“×¢×” ××”×™×•×–×¨×‘×•×˜ ×œ×¢×¨×•×¥")
    logger.error(f"   3. âœ… ×•×•×“× ×©×œ×™×•×–×¨×‘×•×˜ ×™×© ×”×¨×©××ª 'Add Admins'") # â­ ×”×¤×ª×¨×•×Ÿ!
```

### 3. ×ª×™×¢×•×“ ×œ××©×ª××©

×¢×“×›×Ÿ ××ª `README.md` ×¢× ×”× ×—×™×•×ª ×”×¨×©××•×ª ×‘×¨×•×¨×•×ª.

---

## âœ… ×¡×˜×˜×•×¡ ×”×‘×¢×™×”

- **× ××¦×:** 2026-01-12 21:43
- **×¤×ª×¨×•×Ÿ:** ×”×•×¡×¤×ª ×”×¨×©××ª "Add Admins" ×œ×™×•×–×¨×‘×•×˜
- **××ª××™× ×œ:** ×›×œ ×¢×¨×•×¦×™ ×˜×œ×’×¨× (××•×“×™×• + ×•×™×“××•)
- **× ×‘×“×§:** âœ… ×¢×•×‘×“ ×¢×›×©×™×•

---

**×–×›×•×¨:** ×× ××ª×” ××•×¡×™×£ ×¢×¨×•×¦×™× ×—×“×©×™× ×‘×¢×ª×™×“, **×•×•×“× ×©×œ×™×•×–×¨×‘×•×˜ ×™×© ×”×¨×©××ª "Add Admins"** ×‘×›×œ ×¢×¨×•×¥!

×‘×¨×•×š ×”×©×! ğŸ‰
